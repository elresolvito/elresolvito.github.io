<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bodeg√≥n Bayona 59 | Combos y Productos en La Habana</title>
    <meta name="description" content="Tienda online de combos de productos. Compra cavillas de acero, combos de alimentos y productos del mercado. Env√≠os en La Habana.">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="icon-192x192.png">
    <link rel="apple-touch-icon" href="icon-192x192.png">
    <meta name="theme-color" content="#1E90FF">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <a href="#" class="logo">
                    <div class="logo-icon">üõí</div>
                    <div class="logo-text">
                        <span class="logo-main">BODEG√ìN</span>
                        <span class="logo-sub">BAYONA 59</span>
                    </div>
                </a>
                
                <nav class="nav">
                    <a href="#inicio" class="nav-link active"><i class="fas fa-home"></i> Inicio</a>
                    <a href="#combos" class="nav-link"><i class="fas fa-box"></i> Combos</a>
                    <a href="#construccion" class="nav-link"><i class="fas fa-hammer"></i> Construcci√≥n</a>
                    <a href="#mercado" class="nav-link"><i class="fas fa-store"></i> Mercado</a>
                    <a href="#contacto" class="nav-link"><i class="fas fa-phone-alt"></i> Contacto</a>
                </nav>
                
                <div class="header-actions">
                    <button class="btn-cart" id="cartBtn">
                        <i class="fas fa-shopping-basket"></i>
                        <span class="cart-count">0</span>
                    </button>
                    <button class="btn-menu" id="menuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Slider -->
    <section class="hero-slider" id="inicio">
        <div class="swiper">
            <div class="swiper-wrapper">
                <!-- Slide 1: Mercado Bayona 59 -->
                <div class="swiper-slide slide-1">
                    <div class="slide-content">
                        <span class="slide-badge">¬°Nuevo!</span>
                        <h1 class="slide-title">Mercado <span class="highlight">Bayona 59</span></h1>
                        <p class="slide-text">Tu tienda de confianza en La Habana. Productos frescos, calidad garantizada y los mejores precios.</p>
                        <div class="slide-stats">
                            <div class="stat">
                                <i class="fas fa-users"></i>
                                <span>+2000 clientes satisfechos</span>
                            </div>
                            <div class="stat">
                                <i class="fas fa-box-open"></i>
                                <span>+150 productos disponibles</span>
                            </div>
                        </div>
                        <a href="#mercado" class="btn-slide">Ver Productos <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="slide-image">
                        <div class="image-circle"></div>
                    </div>
                </div>

                <!-- Slide 2: Materiales de Construcci√≥n -->
                <div class="swiper-slide slide-2">
                    <div class="slide-content">
                        <span class="slide-badge">¬°Oferta Especial!</span>
                        <h1 class="slide-title">Cavillas de <span class="highlight">Acero</span></h1>
                        <p class="slide-text">Materiales de construcci√≥n de primera calidad. Perfectos para tus proyectos.</p>
                        <div class="slide-features">
                            <div class="feature">
                                <i class="fas fa-check-circle"></i>
                                <span>Alta resistencia</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check-circle"></i>
                                <span>Diferentes medidas</span>
                            </div>
                            <div class="feature">
                                <i class="fas fa-check-circle"></i>
                                <span>Precios por mayor y menor</span>
                            </div>
                        </div>
                        <a href="#construccion" class="btn-slide">Ver Cavillas <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="slide-image">
                        <div class="image-square"></div>
                    </div>
                </div>

                <!-- Slide 3: Combo de Alimentos -->
                <div class="swiper-slide slide-3">
                    <div class="slide-content">
                        <span class="slide-badge">Combo Exclusivo</span>
                        <h1 class="slide-title">Super <span class="highlight">Combo Familiar</span></h1>
                        <p class="slide-text">Todo lo necesario para tu hogar en un solo paquete. ¬°Ahorra hasta un 25%!</p>
                        <ul class="combo-list">
                            <li><i class="fas fa-beer"></i> Cerveza</li>
                            <li><i class="fas fa-oil-can"></i> Aceite</li>
                            <li><i class="fas fa-wine-bottle"></i> Refresco</li>
                            <li><i class="fas fa-cow"></i> Leche Condensada</li>
                            <li><i class="fas fa-weight"></i> Leche en polvo 1kg</li>
                            <li><i class="fas fa-drumstick-bite"></i> Salchichas</li>
                            <li><i class="fas fa-bacon"></i> Jam√≥n</li>
                            <li><i class="fas fa-drumstick-bite"></i> Pollo 10lb</li>
                        </ul>
                        <div class="price-tag">
                            <span class="old-price">$150.00</span>
                            <span class="current-price">$112.50</span>
                        </div>
                        <a href="#combos" class="btn-slide">Comprar Ahora <i class="fas fa-shopping-cart"></i></a>
                    </div>
                    <div class="slide-image">
                        <div class="image-combo"></div>
                    </div>
                </div>
            </div>
            
            <!-- Controles del slider -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-pagination"></div>
        </div>
    </section>

    <!-- Secci√≥n Combos Destacados -->
    <section class="combos-section" id="combos">
        <div class="container">
            <div class="section-header">
                <h2>Nuestros <span class="highlight">Combos</span> Destacados</h2>
                <p>Paquetes especiales con todo lo que necesitas y al mejor precio</p>
            </div>
            
            <div class="combos-grid">
                <!-- Combo 1 -->
                <div class="combo-card featured">
                    <div class="combo-badge">M√°s Vendido</div>
                    <div class="combo-header">
                        <h3>Combo Familiar Premium</h3>
                        <p class="combo-desc">Perfecto para familias de 4-5 personas</p>
                    </div>
                    <div class="combo-content">
                        <ul class="combo-items">
                            <li><i class="fas fa-check"></i> 2x Cerveza 355ml</li>
                            <li><i class="fas fa-check"></i> Aceite Vegetal 1L</li>
                            <li><i class="fas fa-check"></i> 6x Refresco en lata</li>
                            <li><i class="fas fa-check"></i> Leche Condensada 395g</li>
                            <li><i class="fas fa-check"></i> Leche en polvo 1kg</li>
                            <li><i class="fas fa-check"></i> Salchichas 400g</li>
                            <li><i class="fas fa-check"></i> Jam√≥n 250g</li>
                            <li><i class="fas fa-check"></i> Pollo entero 10lb</li>
                        </ul>
                        <div class="combo-price">
                            <div class="price-info">
                                <span class="price-old">$150.00</span>
                                <span class="price-current">$112.50</span>
                                <span class="price-save">Ahorras $37.50</span>
                            </div>
                            <button class="btn-combo">
                                <i class="fas fa-cart-plus"></i> Agregar al Carrito
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Combo 2 -->
                <div class="combo-card">
                    <div class="combo-badge">Nuevo</div>
                    <div class="combo-header">
                        <h3>Combo B√°sico Hogar</h3>
                        <p class="combo-desc">Esenciales para el d√≠a a d√≠a</p>
                    </div>
                    <div class="combo-content">
                        <ul class="combo-items">
                            <li><i class="fas fa-check"></i> Aceite Vegetal 1L</li>
                            <li><i class="fas fa-check"></i> 3x Refresco en lata</li>
                            <li><i class="fas fa-check"></i> Leche Condensada 395g</li>
                            <li><i class="fas fa-check"></i> Leche en polvo 500g</li>
                            <li><i class="fas fa-check"></i> Salchichas 250g</li>
                            <li><i class="fas fa-check"></i> Pollo 5lb</li>
                        </ul>
                        <div class="combo-price">
                            <div class="price-info">
                                <span class="price-old">$75.00</span>
                                <span class="price-current">$56.25</span>
                                <span class="price-save">Ahorras $18.75</span>
                            </div>
                            <button class="btn-combo">
                                <i class="fas fa-cart-plus"></i> Agregar al Carrito
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Combo 3 -->
                <div class="combo-card">
                    <div class="combo-badge">Oferta</div>
                    <div class="combo-header">
                        <h3>Combo Carnes Selectas</h3>
                        <p class="combo-desc">Para los amantes de la buena carne</p>
                    </div>
                    <div class="combo-content">
                        <ul class="combo-items">
                            <li><i class="fas fa-check"></i> Pollo entero 10lb</li>
                            <li><i class="fas fa-check"></i> Carne de res 3lb</li>
                            <li><i class="fas fa-check"></i> Cerdo 2lb</li>
                            <li><i class="fas fa-check"></i> Salchichas 500g</li>
                            <li><i class="fas fa-check"></i> Jam√≥n 500g</li>
                            <li><i class="fas fa-check"></i> Tocino 250g</li>
                        </ul>
                        <div class="combo-price">
                            <div class="price-info">
                                <span class="price-old">$120.00</span>
                                <span class="price-current">$90.00</span>
                                <span class="price-save">Ahorras $30.00</span>
                            </div>
                            <button class="btn-combo">
                                <i class="fas fa-cart-plus"></i> Agregar al Carrito
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Secci√≥n Construcci√≥n -->
    <section class="construction-section" id="construccion">
        <div class="container">
            <div class="section-header">
                <h2>Materiales de <span class="highlight">Construcci√≥n</span></h2>
                <p>Calidad y resistencia para tus proyectos</p>
            </div>
            
            <div class="construction-content">
                <div class="construction-info">
                    <h3>Cavillas de Acero</h3>
                    <p class="construction-desc">
                        Disponemos de cavillas de acero de alta resistencia en diferentes medidas. 
                        Perfectas para trabajos de construcci√≥n, reparaciones y proyectos DIY.
                    </p>
                    
                    <div class="specs-grid">
                        <div class="spec">
                            <i class="fas fa-ruler"></i>
                            <div>
                                <h4>Medidas Disponibles</h4>
                                <p>1/4", 3/8", 1/2", 5/8", 3/4"</p>
                            </div>
                        </div>
                        <div class="spec">
                            <i class="fas fa-weight-hanging"></i>
                            <div>
                                <h4>Resistencia</h4>
                                <p>Grado A36 (250 MPa)</p>
                            </div>
                        </div>
                        <div class="spec">
                            <i class="fas fa-boxes"></i>
                            <div>
                                <h4>Presentaci√≥n</h4>
                                <p>Por unidad o en packs</p>
                            </div>
                        </div>
                        <div class="spec">
                            <i class="fas fa-truck"></i>
                            <div>
                                <h4>Env√≠o</h4>
                                <p>Disponible en toda La Habana</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pricing-info">
                        <div class="price-card">
                            <h4>Pack B√°sico</h4>
                            <p class="price">$25.00</p>
                            <p>10 unidades de 1/2"</p>
                            <button class="btn-buy">Comprar</button>
                        </div>
                        <div class="price-card featured">
                            <h4>Pack Profesional</h4>
                            <p class="price">$45.00</p>
                            <p>25 unidades variadas</p>
                            <button class="btn-buy">Comprar</button>
                        </div>
                        <div class="price-card">
                            <h4>Pack Mayorista</h4>
                            <p class="price">$80.00</p>
                            <p>50 unidades + descuento</p>
                            <button class="btn-buy">Comprar</button>
                        </div>
                    </div>
                </div>
                
                <div class="construction-image">
                    <div class="image-container">
                        <div class="bolt-icon">üî©</div>
                        <div class="bolt-icon">‚öôÔ∏è</div>
                        <div class="bolt-icon">üõ†Ô∏è</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Secci√≥n Mercado Din√°mico -->
    <section class="market-section" id="mercado">
        <div class="container">
            <div class="section-header">
                <h2>Productos del <span class="highlight">Mercado</span></h2>
                <p>Selecci√≥n de los mejores productos para tu hogar</p>
            </div>
            
            <div class="categories" id="categoriesContainer">
                <button class="category-btn active" data-category="todos">Todos</button>
                <!-- Las categor√≠as se cargar√°n din√°micamente -->
            </div>
            
            <div class="products-grid" id="productsGrid">
                <!-- Los productos se cargar√°n din√°micamente desde Google Sheets -->
                <div class="loading-products">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Cargando productos...</p>
                </div>
            </div>
            
            <div class="section-footer">
                <a href="#" class="btn-view-all" id="loadMoreBtn">Ver M√°s Productos <i class="fas fa-arrow-right"></i></a>
            </div>
        </div>
    </section>

    <!-- Secci√≥n de Testimonios -->
    <section class="testimonios-section">
        <div class="container">
            <div class="section-header">
                <h2>Lo que dicen <span class="highlight">nuestros clientes</span></h2>
                <p>Clientes satisfechos en toda La Habana</p>
            </div>
            
            <div class="testimonios-grid">
                <div class="testimonio-card">
                    <div class="testimonio-text">
                        "Excelente servicio y productos de calidad. Los combos son perfectos para la familia."
                    </div>
                    <div class="testimonio-author">
                        <strong>Mar√≠a Gonz√°lez</strong>
                        <span>Vedado, La Habana</span>
                    </div>
                </div>
                
                <div class="testimonio-card">
                    <div class="testimonio-text">
                        "Las cavillas de acero son de primera calidad. Me salvaron mi proyecto de construcci√≥n."
                    </div>
                    <div class="testimonio-author">
                        <strong>Carlos Rodr√≠guez</strong>
                        <span>Centro Habana</span>
                    </div>
                </div>
                
                <div class="testimonio-card">
                    <div class="testimonio-text">
                        "R√°pida entrega y precios justos. Siempre compro aqu√≠ para mi negocio."
                    </div>
                    <div class="testimonio-author">
                        <strong>Laura Mart√≠nez</strong>
                        <span>Playa, La Habana</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Secci√≥n FAQ -->
    <section class="faq-section">
        <div class="container">
            <div class="section-header">
                <h2>Preguntas <span class="highlight">Frecuentes</span></h2>
                <p>Respuestas a tus dudas m√°s comunes</p>
            </div>
            
            <div class="faq-grid">
                <div class="faq-item">
                    <h3>¬øHacen env√≠os a domicilio?</h3>
                    <p>S√≠, realizamos env√≠os a toda La Habana. El costo depende de la zona y el tama√±o del pedido.</p>
                </div>
                
                <div class="faq-item">
                    <h3>¬øQu√© m√©todos de pago aceptan?</h3>
                    <p>Aceptamos efectivo, transferencia bancaria y pagos por WhatsApp.</p>
                </div>
                
                <div class="faq-item">
                    <h3>¬øPuedo personalizar un combo?</h3>
                    <p>¬°Claro! Contacta con nosotros por WhatsApp y creamos un combo a tu medida.</p>
                </div>
                
                <div class="faq-item">
                    <h3>¬øCu√°nto tarda la entrega?</h3>
                    <p>Normalmente 24-48 horas h√°biles despu√©s de confirmado el pedido.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Secci√≥n Contacto -->
    <section class="contact-section" id="contacto">
        <div class="container">
            <div class="contact-grid">
                <div class="contact-info">
                    <h2>¬øNecesitas Ayuda?</h2>
                    <p class="contact-desc">Cont√°ctanos para asesor√≠a personalizada y pedidos especiales</p>
                    
                    <div class="contact-methods">
                        <div class="method">
                            <i class="fas fa-map-marker-alt"></i>
                            <div>
                                <h4>Ubicaci√≥n</h4>
                                <p>Calle Bayona #59, La Habana, Cuba</p>
                            </div>
                        </div>
                        <div class="method">
                            <i class="fas fa-phone"></i>
                            <div>
                                <h4>Tel√©fono</h4>
                                <p>+53 123 456 78</p>
                            </div>
                        </div>
                        <div class="method">
                            <i class="fab fa-whatsapp"></i>
                            <div>
                                <h4>WhatsApp</h4>
                                <p>+53 987 654 32</p>
                            </div>
                        </div>
                        <div class="method">
                            <i class="fas fa-clock"></i>
                            <div>
                                <h4>Horario</h4>
                                <p>Lun-Vie: 9am-6pm<br>S√°b: 9am-2pm</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="whatsapp-cta">
                        <a href="https://wa.me/5398765432" class="btn-whatsapp" target="_blank">
                            <i class="fab fa-whatsapp"></i> Pedir por WhatsApp
                        </a>
                    </div>
                </div>
                
                <div class="contact-form">
                    <h3>Env√≠anos un Mensaje</h3>
                    <form id="contactForm">
                        <div class="form-group">
                            <input type="text" placeholder="Tu Nombre" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" placeholder="Tel√©fono" required>
                        </div>
                        <div class="form-group">
                            <textarea placeholder="Tu Mensaje..." rows="4" required></textarea>
                        </div>
                        <button type="submit" class="btn-submit">
                            <i class="fas fa-paper-plane"></i> Enviar Mensaje
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Carrito Flotante -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3><i class="fas fa-shopping-basket"></i> Tu Carrito</h3>
            <button class="btn-close" id="closeCart">&times;</button>
        </div>
        <div class="cart-items">
            <div class="cart-empty">
                <i class="fas fa-shopping-basket"></i>
                <p>Tu carrito est√° vac√≠o</p>
                <a href="#mercado" class="btn-shop">Ver Productos</a>
            </div>
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span class="total-amount">$0.00</span>
            </div>
            <button class="btn-checkout">Finalizar Compra</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="logo">
                        <div class="logo-icon">üõí</div>
                        <div class="logo-text">
                            <span class="logo-main">BODEG√ìN</span>
                            <span class="logo-sub">BAYONA 59</span>
                        </div>
                    </div>
                    <p class="footer-desc">
                        Tu tienda de confianza en La Habana. Combos especiales, materiales de construcci√≥n 
                        y productos del mercado con la mejor calidad.
                    </p>
                    <div class="social-icons">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
                
                <div class="footer-col">
                    <h4>Enlaces R√°pidos</h4>
                    <ul>
                        <li><a href="#inicio">Inicio</a></li>
                        <li><a href="#combos">Combos</a></li>
                        <li><a href="#construccion">Construcci√≥n</a></li>
                        <li><a href="#mercado">Mercado</a></li>
                        <li><a href="#contacto">Contacto</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h4>Informaci√≥n</h4>
                    <ul>
                        <li><a href="#">T√©rminos y condiciones</a></li>
                        <li><a href="#">Pol√≠tica de privacidad</a></li>
                        <li><a href="#">Env√≠os y entregas</a></li>
                        <li><a href="#">Preguntas frecuentes</a></li>
                    </ul>
                </div>
                
                <div class="footer-col">
                    <h4>Contacto</h4>
                    <div class="contact-info">
                        <p><i class="fas fa-map-marker-alt"></i> Bayona #59, La Habana</p>
                        <p><i class="fas fa-phone"></i> +53 123 456 78</p>
                        <p><i class="fab fa-whatsapp"></i> +53 987 654 32</p>
                        <p><i class="fas fa-envelope"></i> info@bayona59.cu</p>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2024 Bodeg√≥n Bayona 59. Todos los derechos reservados.</p>
                <p class="seo-text">
                    Tienda online La Habana | Venta de combos de alimentos | Cavillas de acero | Productos del mercado | 
                    Env√≠os en La Habana | Calidad garantizada | Los mejores precios
                </p>
            </div>
        </div>
    </footer>

    <!-- Overlay para men√∫ m√≥vil y carrito -->
    <div class="overlay" id="overlay"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.js"></script>
    
    <!-- Cat√°logo local como respaldo -->
    <script src="catalogo.js"></script>
    
    <!-- Sistema din√°mico (Google Sheets primero, fallback local) -->
    <script src="catalogo-dinamico.js"></script>
    
    <!-- Script principal integrado -->
    <script>
    // script.js - Script principal integrado
        
    // ================ INICIALIZACI√ìN GLOBAL ================
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üöÄ Inicializando Bodeg√≥n Bayona 59...');
        
        // Inicializar Swiper
        initSwiper();
        
        // Inicializar sistema de cat√°logo din√°mico (se auto-inicializa)
        initCatalogSystem();
        
        // Inicializar navegaci√≥n
        initNavigation();
        
        // Inicializar carrito
        initCart();
        
        // Inicializar formulario de contacto
        initContactForm();
        
        // Inicializar PWA
        initPWA();
    });
    
    // ================ SWIPER ================
    function initSwiper() {
        const swiper = new Swiper('.swiper', {
            direction: 'horizontal',
            loop: true,
            speed: 800,
            effect: 'slide',
            grabCursor: true,
            centeredSlides: true,
            spaceBetween: 0,
            
            // Paginaci√≥n
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
                dynamicBullets: true
            },
            
            // Navegaci√≥n
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev'
            },
            
            // Autoplay
            autoplay: {
                delay: 5000,
                disableOnInteraction: false,
                pauseOnMouseEnter: true
            },
            
            // Breakpoints
            breakpoints: {
                320: {
                    slidesPerView: 1,
                    spaceBetween: 0
                },
                768: {
                    slidesPerView: 1,
                    spaceBetween: 0
                },
                1024: {
                    slidesPerView: 1,
                    spaceBetween: 0
                }
            }
        });
        
        console.log('‚úÖ Swiper inicializado');
    }
    
    // ================ SISTEMA DE CAT√ÅLOGO DIN√ÅMICO ================
    function initCatalogSystem() {
        // Esperar a que el cat√°logo se cargue
        window.addEventListener('catalogoCargado', function(event) {
            console.log('üì¶ Cat√°logo cargado desde:', event.detail.fuente);
            renderizarProductos();
            renderizarCategorias();
        });
        
        // Tambi√©n escuchar actualizaciones en tiempo real
        window.addEventListener('catalogoActualizado', function() {
            console.log('üîÑ Cat√°logo actualizado');
            renderizarProductos();
            renderizarCategorias();
        });
    }
    
    function renderizarProductos(categoria = 'todos') {
        const grid = document.getElementById('productsGrid');
        if (!grid) return;
        
        // Limpiar grid
        grid.innerHTML = '';
        
        let productos;
        
        if (window.CatalogoDinamico && window.CatalogoDinamico.cargado) {
            // Usar cat√°logo din√°mico
            if (categoria === 'todos') {
                productos = window.CatalogoDinamico.obtenerTodos();
            } else {
                productos = window.CatalogoDinamico.obtenerPorCategoria(categoria);
            }
        } else {
            // Usar cat√°logo local como respaldo
            if (window.catalogo) {
                productos = window.catalogo.productos.filter(p => 
                    p.status === 'available' && 
                    (categoria === 'todos' || p.category === categoria)
                );
            } else {
                productos = [];
            }
        }
        
        if (productos.length === 0) {
            grid.innerHTML = `
                <div class="no-productos">
                    <i class="fas fa-box-open"></i>
                    <p>No hay productos disponibles en esta categor√≠a</p>
                </div>
            `;
            return;
        }
        
        // Limitar a 12 productos inicialmente
        const productosMostrar = productos.slice(0, 12);
        
        productosMostrar.forEach(producto => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.innerHTML = `
                <div class="product-img">
                    <img src="${producto.image}" alt="${producto.name}" onerror="this.src='https://via.placeholder.com/300x200?text=Producto'">
                </div>
                <h3>${producto.name}</h3>
                <p class="product-desc">${producto.description || producto.specificDetails || ''}</p>
                <div class="product-price">
                    <span class="price">$${producto.price.toLocaleString('es-CU')}</span>
                    <button class="btn-add" data-id="${producto.id}">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            `;
            
            grid.appendChild(card);
        });
        
        // Configurar evento para botones de agregar
        document.querySelectorAll('.btn-add').forEach(btn => {
            btn.addEventListener('click', function() {
                const productId = parseInt(this.getAttribute('data-id'));
                agregarAlCarrito(productId);
            });
        });
    }
    
    function renderizarCategorias() {
        const container = document.getElementById('categoriesContainer');
        if (!container) return;
        
        let categorias;
        
        if (window.CatalogoDinamico && window.CatalogoDinamico.cargado) {
            categorias = window.CatalogoDinamico.obtenerCategorias();
        } else if (window.catalogo) {
            categorias = [...new Set(window.catalogo.productos.map(p => p.category))];
        } else {
            categorias = [];
        }
        
        // Limpiar solo los botones de categor√≠a (dejar el bot√≥n "Todos")
        const botonTodos = container.querySelector('[data-category="todos"]');
        container.innerHTML = '';
        if (botonTodos) container.appendChild(botonTodos);
        
        // Agregar categor√≠as √∫nicas
        categorias.forEach(categoria => {
            if (categoria && categoria !== 'Pr√≥ximamente') {
                const btn = document.createElement('button');
                btn.className = 'category-btn';
                btn.textContent = categoria;
                btn.setAttribute('data-category', categoria);
                
                btn.addEventListener('click', function() {
                    // Actualizar clase activa
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Filtrar productos
                    renderizarProductos(categoria);
                });
                
                container.appendChild(btn);
            }
        });
        
        // Evento para bot√≥n "Todos"
        const btnTodos = container.querySelector('[data-category="todos"]');
        if (btnTodos) {
            btnTodos.addEventListener('click', function() {
                document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                renderizarProductos('todos');
            });
        }
    }
    
    // ================ NAVEGACI√ìN ================
    function initNavigation() {
        const menuBtn = document.getElementById('menuBtn');
        const nav = document.querySelector('.nav');
        const overlay = document.getElementById('overlay');
        const navLinks = document.querySelectorAll('.nav-link');
        
        if (menuBtn && nav) {
            menuBtn.addEventListener('click', function() {
                nav.classList.toggle('active');
                overlay.classList.toggle('active');
                document.body.style.overflow = nav.classList.contains('active') ? 'hidden' : '';
            });
        }
        
        if (overlay) {
            overlay.addEventListener('click', function() {
                nav.classList.remove('active');
                overlay.classList.remove('active');
                document.body.style.overflow = '';
                closeCart(); // Tambi√©n cerrar carrito si est√° abierto
            });
        }
        
        // Navegaci√≥n suave
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId.startsWith('#')) {
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        // Cerrar men√∫ m√≥vil si est√° abierto
                        if (window.innerWidth <= 768) {
                            nav.classList.remove('active');
                            overlay.classList.remove('active');
                            document.body.style.overflow = '';
                        }
                        
                        // Scroll suave
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });
                        
                        // Actualizar enlace activo
                        navLinks.forEach(l => l.classList.remove('active'));
                        this.classList.add('active');
                    }
                }
            });
        });
        
        // Actualizar enlace activo al hacer scroll
        window.addEventListener('scroll', function() {
            const scrollPos = window.scrollY + 100;
            
            navLinks.forEach(link => {
                const targetId = link.getAttribute('href');
                if (targetId.startsWith('#')) {
                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        const targetTop = targetElement.offsetTop;
                        const targetBottom = targetTop + targetElement.offsetHeight;
                        
                        if (scrollPos >= targetTop && scrollPos < targetBottom) {
                            navLinks.forEach(l => l.classList.remove('active'));
                            link.classList.add('active');
                        }
                    }
                }
            });
        });
    }
    
    // ================ CARRITO ================
    let carrito = JSON.parse(localStorage.getItem('carrito_bayona59')) || [];
    
    function initCart() {
        const cartBtn = document.getElementById('cartBtn');
        const cartSidebar = document.getElementById('cartSidebar');
        const closeCartBtn = document.getElementById('closeCart');
        const overlay = document.getElementById('overlay');
        
        if (cartBtn && cartSidebar) {
            cartBtn.addEventListener('click', openCart);
        }
        
        if (closeCartBtn) {
            closeCartBtn.addEventListener('click', closeCart);
        }
        
        if (overlay) {
            overlay.addEventListener('click', closeCart);
        }
        
        // Inicializar checkout
        const checkoutBtn = document.querySelector('.btn-checkout');
        if (checkoutBtn) {
            checkoutBtn.addEventListener('click', procesarCheckout);
        }
        
        // Actualizar contador del carrito
        actualizarContadorCarrito();
    }
    
    function openCart() {
        const cartSidebar = document.getElementById('cartSidebar');
        const overlay = document.getElementById('overlay');
        
        if (cartSidebar) {
            cartSidebar.classList.add('active');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            renderizarCarrito();
        }
    }
    
    function closeCart() {
        const cartSidebar = document.getElementById('cartSidebar');
        const overlay = document.getElementById('overlay');
        const nav = document.querySelector('.nav');
        
        if (cartSidebar) cartSidebar.classList.remove('active');
        if (overlay) overlay.classList.remove('active');
        if (nav) nav.classList.remove('active');
        document.body.style.overflow = '';
    }
    
    function agregarAlCarrito(productId) {
        let producto;
        
        // Buscar producto en cat√°logo din√°mico o local
        if (window.CatalogoDinamico && window.CatalogoDinamico.cargado) {
            producto = window.CatalogoDinamico.obtenerPorId(productId);
        } else if (window.catalogo) {
            producto = window.catalogo.obtenerPorId(productId);
        }
        
        if (!producto) {
            mostrarNotificacion('Producto no encontrado', 'error');
            return;
        }
        
        // Verificar si el producto ya est√° en el carrito
        const itemIndex = carrito.findIndex(item => item.id === productId);
        
        if (itemIndex > -1) {
            // Incrementar cantidad
            carrito[itemIndex].cantidad += 1;
        } else {
            // Agregar nuevo producto
            carrito.push({
                id: producto.id,
                name: producto.name,
                price: producto.price,
                image: producto.image,
                cantidad: 1
            });
        }
        
        // Guardar en localStorage
        localStorage.setItem('carrito_bayona59', JSON.stringify(carrito));
        
        // Actualizar interfaz
        actualizarContadorCarrito();
        
        // Mostrar notificaci√≥n
        mostrarNotificacion(`¬°${producto.name} agregado al carrito!`, 'exito');
        
        // Actualizar carrito si est√° abierto
        if (document.getElementById('cartSidebar').classList.contains('active')) {
            renderizarCarrito();
        }
    }
    
    function actualizarContadorCarrito() {
        const countElement = document.querySelector('.cart-count');
        if (countElement) {
            const totalItems = carrito.reduce((total, item) => total + item.cantidad, 0);
            countElement.textContent = totalItems;
            
            // Animaci√≥n
            if (totalItems > 0) {
                countElement.style.display = 'flex';
                countElement.classList.add('activo');
                setTimeout(() => countElement.classList.remove('activo'), 500);
            } else {
                countElement.style.display = 'none';
            }
        }
    }
    
    function renderizarCarrito() {
        const cartItems = document.querySelector('.cart-items');
        const cartTotal = document.querySelector('.total-amount');
        
        if (!cartItems) return;
        
        if (carrito.length === 0) {
            cartItems.innerHTML = `
                <div class="cart-empty">
                    <i class="fas fa-shopping-basket"></i>
                    <p>Tu carrito est√° vac√≠o</p>
                    <a href="#mercado" class="btn-shop">Ver Productos</a>
                </div>
            `;
            
            // Configurar evento para el bot√≥n
            const shopBtn = cartItems.querySelector('.btn-shop');
            if (shopBtn) {
                shopBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    closeCart();
                    
                    // Navegar a mercado
                    const mercadoSection = document.querySelector('#mercado');
                    if (mercadoSection) {
                        window.scrollTo({
                            top: mercadoSection.offsetTop - 80,
                            behavior: 'smooth'
                        });
                    }
                });
            }
        } else {
            let html = '';
            let total = 0;
            
            carrito.forEach((item, index) => {
                const subtotal = item.price * item.cantidad;
                total += subtotal;
                
                html += `
                    <div class="cart-item">
                        <div class="cart-item-info">
                            <h4>${item.name}</h4>
                            <p>$${item.price.toLocaleString('es-CU')} x ${item.cantidad}</p>
                        </div>
                        <div class="cart-item-actions">
                            <button class="btn-cantidad btn-decrease" data-index="${index}">-</button>
                            <span class="item-quantity">${item.cantidad}</span>
                            <button class="btn-cantidad btn-increase" data-index="${index}">+</button>
                            <button class="btn-eliminar" data-index="${index}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            cartItems.innerHTML = html;
            
            // Actualizar total
            if (cartTotal) {
                cartTotal.textContent = `$${total.toLocaleString('es-CU')}`;
            }
            
            // Configurar eventos de los botones
            document.querySelectorAll('.btn-increase').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    carrito[index].cantidad += 1;
                    guardarYActualizarCarrito();
                });
            });
            
            document.querySelectorAll('.btn-decrease').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    if (carrito[index].cantidad > 1) {
                        carrito[index].cantidad -= 1;
                        guardarYActualizarCarrito();
                    }
                });
            });
            
            document.querySelectorAll('.btn-eliminar').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    carrito.splice(index, 1);
                    guardarYActualizarCarrito();
                });
            });
        }
    }
    
    function guardarYActualizarCarrito() {
        localStorage.setItem('carrito_bayona59', JSON.stringify(carrito));
        actualizarContadorCarrito();
        renderizarCarrito();
    }
    
    function procesarCheckout() {
        if (carrito.length === 0) {
            mostrarNotificacion('El carrito est√° vac√≠o', 'error');
            return;
        }
        
        // Crear mensaje de WhatsApp
        let mensaje = '¬°Hola! Quiero hacer un pedido:\n\n';
        let total = 0;
        
        carrito.forEach(item => {
            const subtotal = item.price * item.cantidad;
            total += subtotal;
            mensaje += `‚Ä¢ ${item.name} x${item.cantidad} - $${subtotal.toLocaleString('es-CU')}\n`;
        });
        
        mensaje += `\nüí∞ *Total: $${total.toLocaleString('es-CU')}*\n\n`;
        mensaje += 'üìã *Mis datos:*\n';
        mensaje += 'Nombre: [Tu nombre aqu√≠]\n';
        mensaje += 'Tel√©fono: [Tu tel√©fono aqu√≠]\n';
        mensaje += 'Direcci√≥n: [Tu direcci√≥n aqu√≠]\n\n';
        mensaje += '¬øPodr√≠an confirmar mi pedido? ¬°Gracias!';
        
        // Codificar mensaje para URL
        const mensajeCodificado = encodeURIComponent(mensaje);
        
        // N√∫mero de WhatsApp (reemplaza con el real)
        const telefonoWhatsApp = '5398765432';
        
        // Abrir WhatsApp
        window.open(`https://wa.me/${telefonoWhatsApp}?text=${mensajeCodificado}`, '_blank');
        
        // Cerrar carrito
        closeCart();
        
        // Opcional: vaciar carrito despu√©s de enviar
        // carrito = [];
        // localStorage.removeItem('carrito_bayona59');
        // actualizarContadorCarrito();
    }
    
    // ================ FORMULARIO DE CONTACTO ================
    function initContactForm() {
        const contactForm = document.getElementById('contactForm');
        if (!contactForm) return;
        
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const nombre = this.querySelector('input[type="text"]').value.trim();
            const telefono = this.querySelector('input[type="tel"]').value.trim();
            const mensaje = this.querySelector('textarea').value.trim();
            
            if (!nombre || !telefono || !mensaje) {
                mostrarNotificacion('Por favor, completa todos los campos', 'error');
                return;
            }
            
            // Crear mensaje para WhatsApp
            const mensajeWhatsApp = `¬°Hola Bodeg√≥n Bayona 59! üëã\n\n`
                + `*Nuevo mensaje de contacto:*\n\n`
                + `üë§ *Nombre:* ${nombre}\n`
                + `üìû *Tel√©fono:* ${telefono}\n`
                + `üí¨ *Mensaje:* ${mensaje}\n\n`
                + `_Este mensaje fue enviado desde el formulario de contacto de tu sitio web._`;
            
            const mensajeCodificado = encodeURIComponent(mensajeWhatsApp);
            const telefonoWhatsApp = '5398765432';
            
            // Abrir WhatsApp
            window.open(`https://wa.me/${telefonoWhatsApp}?text=${mensajeCodificado}`, '_blank');
            
            // Mostrar confirmaci√≥n
            mostrarNotificacion('Mensaje listo para enviar por WhatsApp', 'exito');
            
            // Limpiar formulario
            this.reset();
        });
    }
    
    // ================ NOTIFICACIONES ================
    function mostrarNotificacion(mensaje, tipo = 'exito') {
        // Crear notificaci√≥n
        const notificacion = document.createElement('div');
        notificacion.className = `notificacion ${tipo}`;
        notificacion.innerHTML = `
            <i class="fas fa-${tipo === 'exito' ? 'check-circle' : 'exclamation-circle'}"></i>
            <span>${mensaje}</span>
        `;
        
        // Agregar al body
        document.body.appendChild(notificacion);
        
        // Mostrar con animaci√≥n
        setTimeout(() => notificacion.classList.add('mostrar'), 10);
        
        // Ocultar despu√©s de 3 segundos
        setTimeout(() => {
            notificacion.classList.remove('mostrar');
            setTimeout(() => {
                if (notificacion.parentNode) {
                    notificacion.parentNode.removeChild(notificacion);
                }
            }, 300);
        }, 3000);
    }
    
    // ================ PWA ================
    function initPWA() {
        // Registrar Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('sw.js')
                    .then(function(registration) {
                        console.log('‚úÖ Service Worker registrado con √©xito:', registration.scope);
                    })
                    .catch(function(error) {
                        console.log('‚ùå Error al registrar Service Worker:', error);
                    });
            });
        }
        
        // Detectar si es PWA instalada
        window.addEventListener('appinstalled', function() {
            console.log('üì± PWA instalada con √©xito');
        });
        
        // Mostrar bot√≥n de instalaci√≥n en iOS
        if (window.navigator.standalone) {
            console.log('üì± PWA ejecut√°ndose en modo standalone');
        }
    }
    </script>
</body>
</html>

